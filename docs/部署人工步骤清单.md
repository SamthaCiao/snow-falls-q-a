# 部署人工步骤清单（傻瓜式，可逐项确认）

请按顺序完成下面每一步。每完成一步，你可以回复我：「第 X 步已完成」，我再帮你确认或进入下一步。

---

## 请先填写（复制粘贴即可）

| 项 | 你需要填的内容 | 示例 |
|----|----------------|------|
| **GitHub 仓库地址** | 你的项目在 GitHub 上的网址 | `https://github.com/SamthaCiao/snow-falls-q-a` |
| **服务名称**（部署后的子域名） | 英文/数字，会变成 `https://snow-falls-q-a.ai-builders.space` | `my-novel-rag` 或 `snow-falls-q-a` |
| **要部署的分支** | 一般是 `main` 或 `master` | `main` |

**请把你的「GitHub 仓库地址」写在这里（或直接发给我）：**  
`https://github.com/SamthaCiao/snow-falls-q-a`

---

## 第一步：确认本机已安装 Git，并配置过 GitHub

1. 打开 **命令提示符（CMD）** 或 **PowerShell**（在开始菜单搜索即可）。
2. 输入下面命令并回车：
   ```bash
   git --version
   ```
   - 若显示类似 `git version 2.x.x`，说明已安装，进入第 3 步。
   - 若提示“不是内部或外部命令”，请先安装 Git：打开 https://git-scm.com/download/win 下载并安装，安装时一路“下一步”即可。
3. 再输入：
   ```bash
   git config --global user.name "SamthaCiao"
   git config --global user.email "menghuanBINGTONG@126.com"
   ```
   把 `你的名字或昵称` 和 `你的GitHub登录邮箱` 换成你自己的，回车。
4. **若你从没在 GitHub 上登录过**：请先打开 https://github.com 注册/登录账号。

**完成请回复：第 1 步已完成**

---

## 第二步：确认「敏感内容」没有被 Git 跟踪

目标：确保 `.env`、`数据源/`、`chroma_db/` 不会被你推到 GitHub。

1. 在 CMD 或 PowerShell 里，用 `cd` 进入你的项目文件夹，例如：
   ```bash
   cd "d:\work\和鲸社区\superlinear课程\AI architect\phaseB\RAG_1.31版本"
   ```
2. 执行：
   ```bash
   git status
   ```
3. 在输出列表里检查：
   - **不应该出现**：`数据源`、`chroma_db`、`.env`、`SUPER_MIND_API_KEY.env` 这些名字（若出现说明它们可能被提交，需要先让 .gitignore 生效）。
   - 若**出现了**上述任一文件/文件夹：先回复我「第 2 步里看到了 数据源/ chroma_db/ .env」，我会告诉你怎么从暂存区移除并保证不再提交。

**完成请回复：第 2 步已完成**（若发现敏感文件被跟踪，也请说明）

---

## 第三步：在 GitHub 上创建仓库（仅「还没有」远程仓库时做）

**若你已经在 GitHub 上建好了这个项目的仓库，并且知道仓库地址，可跳过第三步，直接做第四步。**

1. 打开浏览器，登录 https://github.com 。
2. 点击右上角 **“+”** → **“New repository”**。
3. **Repository name**：填英文仓库名，例如 `novel-rag` 或 `RAG_1.31`（不要空格）。
4. **Public** 选上（必须是公开仓库才能被部署平台拉取）。
5. **不要**勾选 “Add a README file”（因为你本地已有代码）。
6. 点 **“Create repository”**。
7. 创建好后，页面上会有一个地址，类似：`https://github.com/你的用户名/仓库名`，**复制这个地址**，这就是你的「GitHub 仓库地址」，填到本文最上面的表格里。

**完成请回复：第 3 步已完成，我的仓库地址是 https://github.com/xxx/xxx**

---

## 第四步：把本地项目“第一次”推送到 GitHub（仅第一次需要）

**若这个项目之前已经成功 `git push` 过，可跳过第四步。**

1. 在项目文件夹下打开 CMD 或 PowerShell（路径要和第二步一样）。
2. 检查是否已经和远程仓库关联：
   ```bash
   git remote -v
   ```
   - 若没有任何输出，说明还没关联，继续下面 3。
   - 若已有 `origin` 且地址正确，可以直接做第 4 小步的 `git push`。
3. **添加远程仓库**（把下面的地址换成你在第三步复制的「GitHub 仓库地址」）：
   ```bash
   git remote add origin https://github.com/你的用户名/你的仓库名.git
   ```
   例如：
   ```bash
   git remote add origin https://github.com/zhangsan/novel-rag.git
   ```
4. 推送代码（分支名一般是 `main`，若是 `master` 就改成 `master`）：
   ```bash
   git add .
   git status
   ```
   再看一遍 `git status` 列表，**确认没有** `数据源`、`chroma_db`、`.env`。若有，先不要 `commit`，回复我。
   ```bash
   git commit -m "准备公网部署：代码与Dockerfile"
   git branch -M main
   git push -u origin main
   ```
5. 若提示要登录：在浏览器弹出页面用 GitHub 账号登录授权即可。若提示 “branch 'main' not found”，可先试 `git push -u origin master`。

**完成请回复：第 4 步已完成，已成功 push 到 GitHub**

---

## 第五步：之后每次改完代码都要“推上去”

以后每次在 Cursor 里改完代码、要部署或更新线上版本时，在项目目录执行：

```bash
git add .
git status
```
确认没有敏感文件后：
```bash
git commit -m "这里写一句你改了什么"
git push
```

**完成请回复：第 5 步已理解**

---

## 第六步：准备部署时要提供给 AI 的三样信息

部署到 ai-builders.space 时，AI 会向你要这三项，你只要**复制粘贴**即可：

| 序号 | 要提供的内容 | 你填好的值（可先写在这里） |
|------|--------------|----------------------------|
| 1 | **GitHub 仓库 URL** | 例如：`https://github.com/你的用户名/你的仓库名` |
| 2 | **服务名称**（英文/数字，会变成子域名） | 例如：`my-novel-rag` |
| 3 | **要部署的分支** | 一般是：`main` 或 `master` |

部署后访问地址将是：`https://你填的服务名.ai-builders.space`。

**完成请回复：第 6 步已准备，我的仓库地址是 xxx，服务名打算用 xxx，分支是 main**

---

## 第七步：env_vars 与数据源「在哪儿配、怎么配」（傻瓜式）

平台**没有**单独的“环境变量设置页”或“密钥管理页”。**env_vars、DATA_SOURCE_DIR、CHROMA_DB_PATH 都是在「发起部署」的那一步，写在请求体里一起传的。**

### 7.1 你具体要做的

- **env_vars**（如 DEEPSEEK_API_KEY、BAIDU_API_KEY）在**发起部署**时配置：若部署平台提供环境变量设置页，在平台填写即可；若通过 API 发起部署，则在请求体的 **env_vars** 里填写。
- 用课程发给你的 **API Key** 调用部署接口时，请求体示例见 [env_vars与数据源配置说明.md](env_vars与数据源配置说明.md)。
- 若老师/平台支持挂载数据源或 chroma_db，在 env_vars 里加 **DATA_SOURCE_DIR**、**CHROMA_DB_PATH**（详见下文 7.2）。

更细的说明（DATA_SOURCE_DIR、CHROMA_DB_PATH 何时填、平台是否支持挂载等）见：**[env_vars与数据源配置说明.md](env_vars与数据源配置说明.md)**。

### 7.2 DATA_SOURCE_DIR、CHROMA_DB_PATH 在哪儿配？

- **也在同一次部署请求的 env_vars 里**。若平台支持挂载目录，你把数据源挂到容器里某路径（如 `/app/数据源`），就在 **env_vars** 里加：`"DATA_SOURCE_DIR": "/app/数据源"`；chroma_db 同理，加 **CHROMA_DB_PATH**。
- 若平台**不支持**挂载，容器里就没有 数据源/chroma_db，需**联系老师**确认如何提供数据源（例如是否有示例数据或其它方式）。详见 [env_vars与数据源配置说明.md](env_vars与数据源配置说明.md)。

**完成请回复：第 7 步已理解**

---

## 第八步：在 Cursor 里触发部署

1. 确认第四步（或第五步）已经 `git push` 成功，GitHub 网页上能看到最新代码。
2. 在 Cursor 里对 AI 说一句类似：
   - 「我要部署到 ai-builders.space，仓库地址是：**你的仓库URL**，服务名：**你取的服务名**，分支：**main**，请帮我执行部署。」
3. AI 会按平台要求调用部署 API；部署一般需要 5～10 分钟，等 AI 提示你完成或让你看日志即可。

**完成请回复：第 8 步已执行，或：我卡在第 X 步**

---

## 小结：你“只需要”做的几件事

1. **粘贴项目地址**：在本文最上面填好「GitHub 仓库地址」；部署时把同一地址和**服务名、分支**一起发给 AI。
2. **前端确认**：  
   - 确认 `git status` 里没有 数据源、chroma_db、.env；  
   - 确认已 `git push` 到 GitHub；  
   - 确认服务名、分支无误后，在 Cursor 里说一句「请帮我部署」，把仓库地址、服务名、分支发给 AI。

若某一步不清楚，直接回复「第 X 步不会」或把界面/报错截图描述给我，我按步骤帮你排查。
